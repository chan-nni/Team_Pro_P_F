<!DOCTYPE html>
<html lang="en">

<head></head>

<body>
<div th:replace="fragments/header :: headerFragment"></div>
<div th:include="fragments/nav.html"></div>

<main id="main">

  <!-- ======= Our Portfolio Section ======= -->
  <section class="breadcrumbs">
    <div class="container">

      <div class="d-flex justify-content-between align-items-center">
        <h2>My Page</h2>
        <ol>
          <li><a href="../home/index.html">Home</a></li>
          <li>My Page</li>
        </ol>
      </div>

    </div>
  </section><!-- End Our Portfolio Section -->

  <!--마이페이지 글작성-->
  <div class="container">

    <div class="profile">

      <div class="profile-image">

        <img src="https://images.unsplash.com/photo-1513721032312-6a18a42c8763?w=152&h=152&fit=crop&crop=faces" alt="">

      </div>

      <div class="profile-user-settings">
        <h1 class="profile-user-name">기업 : </h1>
        <h1 class="profile-user-name" th:text="${companies.companyname}">회사명</h1>

      </div>

      <div class="profile-stats">

        <li><a th:href="@{/em_add}" class="btn profile-edit-btn">공고등록</a></li>
        <ul>
          <h3>팔로워 : </h3><a th:href="@{/c_followList}"><h1 class="profile-user-name" th:text="${followerCount}"></h1></a>
        </ul>

      </div>

    </div>
  </div>
  <!-- End of profile section -->

  <div class="tabs">
    <input id="all" type="radio" name="ctab_item" checked>
    <label class="ctab_item" for="all">소개</label>
    <input id="programming" type="radio" name="ctab_item">
    <label class="ctab_item" for="programming">공고</label>

    <style>
      /* 추가한 CSS 스타일 */
      .btn.intro-btn {
        background-color: #68A4C4; /* 하늘색 계열로 변경 */
        color: white;
        padding: 8px 16px; /* 크기를 줄임 */
        border: none;
        border-radius: 5px;
        cursor: pointer;
        display: block; /* 가운데 정렬을 위해 블록 레벨로 설정 */
        margin: 20px auto; /* 가운데 정렬 및 하단 여백 추가 */
      }

      .btn.intro-btn:hover {
        background-color: #8dbad2; /* 호버 시 색 변경 */
      }

      /* 나머지 스타일은 이전과 동일 */
      #introForm, #editedDataForm {
        background-color: #f2f2f2;
        padding: 20px;
        border-radius: 10px;
      }

      #introForm label, #editIntroForm label {
        font-weight: bold;
      }

      #introDataForm input,
      #editedDataForm input,
      #introDataForm textarea,
      #editedDataForm textarea{
        width: 100%;
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
      }

      .intro-save {
        background-color: #68A4C4;
        color: white;
        padding: 10px 20px; /*버튼 크기*/
        border: none;
        border-radius: 5px;
        cursor: pointer;
        display: block;
        margin: 0 auto;
      }

      .intro-save:hover {
        background-color: #8dbad2;
      }

      textarea#description,
      textarea#editedDescription{
        border: 1px solid #ccc; /* 좌우상단 선 스타일 */
        /*padding: 10px; !* 내용과 선 사이 여백 *!*/
        border-radius: 10px; /* 선을 둥글게 만드는 스타일 */
      }
    </style>

    <div class="tab_content" id="all_content" th:each="company : ${companies}">
      <h3 th:if="${companies.intro != null}" th:text="${companies.intro}">안녕</h3>
      <div th:unless="${companies.intro != null}">
        <button class="btn intro-btn" id="introButton" onclick="showIntroForm()">소개 작성하기</button>
        <div id="introForm" style="display: none;">
          <h3>소개 작성</h3><br>
          <form th:action="@{/C_intro}" id="introDataForm" method="post">
            <label for="description">소개:</label>
            <textarea id="description" th:field="*{companies.intro}" name="description" rows="8" cols="105" required></textarea><br><br>
            <button type="submit" class="intro-save">저장</button>
          </form>
        </div>
      </div>
      <div th:if="${companies.intro != null}">
        <button class="btn intro-btn" id="editIntroButton" onclick="showEditIntroForm()">소개 수정하기</button>
        <div id="editIntroForm" style="display: none;">
          <form th:action="@{/C_intro}" id="editedDataForm" method="post">
            <h3>소개 수정</h3><br>
            <label for="editedDescription">수정된 소개:</label>
            <textarea id="editedDescription" th:field="*{companies.intro}" name="editedDescription" rows="8" cols="105" required></textarea><br><br>
            <button type="submit" class="intro-save">저장</button>
          </form>
        </div>
      </div>
    </div>

    <script>
      function showIntroForm() {
        const introForm = document.getElementById("introForm");
        if (introForm.style.display === "none" || introForm.style.display === "") {
          introForm.style.display = "block";
        } else {
          introForm.style.display = "none";
        }
      }

      function showEditIntroForm() {
        var editIntroForm = document.getElementById('editIntroForm');
        editIntroForm.style.display = 'block';
      }

    </script>

    <div class="tab_content" id="programming_content">
      <section class="about" data-aos="fade-up">
        <div class="container">

          <table class="ui celled  table">
            <thead>
            <tr>
              <th>공고명</th>
              <th>채용형태</th>
              <th>기업명</th>
              <th>근무지역</th>
              <th>시작일</th>
              <th>마감일</th>
              <th>수정</th>
              <th>삭제</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="job : ${jobs}">
              <td>
                <a th:href="@{/job_de(id=${job.seq})}" th:text="${job.title}" />
              </td>
              <td th:text="${job.employ.getDisplayName()}">경력 </td>
              <td th:text="${job.company.companyname}">카카오</td>
              <td th:text="${job.area.getDisplayName()}">서울</td>
              <td th:text="${job.startdate}"></td>
              <td th:text="${job.enddate}">~ 4/30</td>
              <th>
                  <a th:href="@{/job_edit(id=${job.seq})}">수정</a>
              </th>
              <th>
                  <a th:href="@{/job_delete(id=${job.seq})}">삭제</a>
              </th>
            </tr>
            </tbody>
          </table>
        </div>
      </section>

    </div>

  </div>

</main><!-- End #main -->

<!-- ======= Footer ======= -->
<div th:replace="fragments/footer :: footerFragment"></div>
</body>

</html>